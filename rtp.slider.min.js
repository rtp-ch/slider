/*

  Copyright (c) Marcel Greter 2010/2012 - rtp.ch - RTP jQuery Slider 0.9.0
  This is free software; you can redistribute it and/or modify it under the terms
  of the [GNU General Public License](http://www.gnu.org/licenses/gpl-3.0.txt),
  either version 3 of the License, or (at your option) any later version.


*//*

  Copyright (c) Marcel Greter 2012 - OCBNET Layouter 1.0.0
  This plugin available for use in all personal or commercial projects under both MIT and GPL licenses.

  The Layouter takes care of widgets that have aspect ratios.
  These Widgets can run into problem when the scrollbar appears.
  This lib does the same as any (tested) browser does when displaying
  images with an aspect ratio and a flexible width. When the vertical
  scrollbar appears due to the widget/image beeing to tall, the width
  of the widget would be decreased which in turn decreases the height.
  This then can make the scrollbar to disapear again, which in turn
  would increase the width and height of the widget again. To solve
  this endless loop, we force a vertical scrollbar to be shown.

  This fixes layout and scrollbar problems like these:
  http://stackoverflow.com/questions/6818096

*//* @@@@@@@@@@ STATIC CLASS @@@@@@@@@@ */// create private scope
(function(a){function o(b,c){var d=e.length;while(d--){var f=e[d],g=f[b];a.isFunction(g)&&g.call(f,c)}}function p(a){o("preLayout",a),o("updateLayout",a),o("postLayout",a)}function q(a){var d={force:a};g&&(c.css("overflow-y",g),g=null),f&&(c.css("overflow-x",f),f=null);var e=b.innerWidth(),h=b.innerHeight();p(d);var j=b.innerWidth(),k=b.innerHeight();if(e!=j||h!=k){p(d);var l=b.innerWidth(),m=b.innerHeight();if(j!=l||k!=m){if(i||k!=m)f=c.css("overflow-x"),f!="hidden"&&c.css("overflow-x","scroll");if(i||j!=l)g=c.css("overflow-y"),g!="hidden"&&c.css("overflow-y","scroll");p(d)}}}var b=a(window),c=null,d,e=a(),f,g,h=a.browser.msie&&parseInt(a.browser.version,10)==8,i=a.browser.mozilla,j=window.requestAnimationFrame,k=window.cancelRequestAnimationFrame,l=["ms","moz","webkit","o"];for(var m=0;m<l.length&&!j;++m)j=window[l[m]+"RequestAnimationFrame"],k=window[l[m]+"CancelRequestAnimationFrame"];if(j)var n=function(a){j(a)};n||(n=window.setTimeout),k||(k=window.clearTimeout),q.schedule=function(a,b){if(!b&&d)return;d&&k(d),d=n(function(){q(),d=null},a||0)},q.add=function(b){c||(c=a("BODY:first")),b=a(b),e.length==0&&b.length>0&&a(window).bind("resize",t),e=e.add(a(b))},q.del=function(b){b=a(b),e=e.not(b),e.length==0&&a(window).bind("resize",t)};var r=!1,s=function(){if(r)return!1;r=n(function(){q(),r=!1},0)},t=h?s:q;typeof OCBNET=="undefined"&&(OCBNET={}),OCBNET.Layout=q})(jQuery),window.RTP||(window.RTP={}),RTP.Multievent=function(a){this.cb=a,this.ids=0,this.args={},this.required=0,this.listeners=[],this.satisfied=[]},function(){var a=jQuery.isFunction;this.prerequisite=function(b){var c=a(b)?b:null,d=a(b)?null:b,e=this;this.required++;var f=this.ids++;return this.satisfied[f]=!1,function(){if(!e.satisfied[f]){c&&c(),e.required--,e.satisfied[f]=!0,d&&(e.args[d]=arguments);if(e.required==0&&e.cb){e._cb=e.cb,e.cb=!1;for(var a=0;a<e.listeners.length;a++)e.listeners[a]();return e._cb()}}}},this.finish=function(){if(this.ids==0&&this.cb){this._cb=this.cb,this.cb=!1;for(var a=0;a<this.listeners.length;a++)this.listeners[a]();return this._cb()}}}.call(RTP.Multievent.prototype),function(a){window.RTP||(window.RTP={}),RTP.Slider=function(b,c){function k(a,b){var c=this.conf[a];return(new RegExp(/^l/i)).test(c)&&(c=0),(new RegExp(/^c/i)).test(c)&&(c=.5),(new RegExp(/^r/i)).test(c)&&(c=1),isNaN(parseInt(c,10))&&(c=b),isNaN(parseInt(c,10))&&(c=.5),this.conf[a]=c}function o(){d.trigger("ready")}var d=this;if(d.inited)return;d.inited=!0,d.conf=a.extend({align:"center",alignPanel:!1,alignViewport:!1,vertical:!1,setFloat:!0,carousel:!1,slideFirst:0,panelsVisible:1,text:{},tmpl:{}},c),d.klass={next:"next",current:"current",previous:"previous"},d.tmpl={wrapper:'<div class="rtp-slider-wrapper"></div>',container:'<div class="rtp-slider-container"></div>'},d.selector={panel:"DIV.rtp-slider-panel",container:"DIV.rtp-slider-container"},d.trigger("config"),isNaN(d.conf.align)&&(d.conf.align=.5),isNaN(d.conf.panelsVisible)&&(d.conf.panelsVisible=.5);var e=d.viewport=a(b),f=d.slides=e.find(d.selector.panel),g=d.wrapper=e.wrapAll(d.tmpl.wrapper).parent(),h=d.container=e.wrapInner(d.tmpl.container).find(d.selector.container);d.rmin=d.smin=d.pmin=0,this.conf.vertical&&this.wrapper.addClass("rtp-slider-vertical"),this.position=a.isFunction(d.conf.slideFirst)?d.conf.slideFirst.call(d):d.conf.slideFirst||0,d.cloned=a();if(d.conf.carousel){var i=this.conf.clonePanels||Math.ceil(this.conf.panelsVisible),j=a();while(i>f.length)i-=f.length,j=j.add(f.clone());j=j.add(f.slice(0,i).clone()),j.appendTo(d.container).addClass("cloned"),d.smax+=j.length,d.cloned=j}var l=k.call(this,"align",.5);k.call(this,"alignViewport",l),k.call(this,"alignPanel",l),d.trigger("init"),d.panels=e.find(d.selector.panel);var m=this.conf.offsetReverse?"right":"left";this.conf.vertical&&(m="none");var n=this.conf.carousel3d?"visible":"hidden";this.panels.css({"float":m}).add(this.viewport).add(this.container).css({zoom:1,overflow:n,position:"relative"}),this.conf.vertical&&(this.viewport.css({"min-height":"50px"}),this.container.css({top:"0px",left:"0px",right:"0px",bottom:"0px",position:"absolute"})),this.conf.vertical||this.container.css("float",m).after('<DIV style="clear:both;"/>');var p=new RTP.Multievent(o),q={};a("IMG",e).each(function(){var b=this;if(q[b.src])return;q[b.src]=!0;if(!this.complete&&this.readyState!==4&&this.readyState!=="complete"||this.width==0&&this.height==0){var c=p.prerequisite();a(this).bind("load",function(){q[b.src]=!1,c()})}}),p.finish()},function(a,b){a.panel2panel=function(a){if(this.conf.carousel){while(a>this.smax)a-=this.slides.length;while(a<this.smin)a+=this.slides.length}else a>this.smax&&(a=this.smax),a<this.smin&&(a=this.smin);return a},a.slide2panel=function(a){return this.panel2panel(a+this.smin)},a.panel2slide=function(a){return this.panel2panel(a)-this.smin},a.slide2slide=function(a){return this.panel2slide(this.slide2panel(a))}}(RTP.Slider.prototype,a),a.fn.rtpSlider=function(b){return this.each(function(){typeof a(this).data("rtp-slider")=="undefined"&&a(this).data("rtp-slider",new RTP.Slider(this,b))})}}(jQuery),function(a,b){function c(a,b){return a.order-b.order}function d(a,b,d,e){isNaN(d.order)&&(d.order=0),isNaN(e)||(d.order=e),a[b]||(a[b]=[]),a[b].push(d),a[b]=a[b].sort(c)}a.hooks={},a.trigger=function(){var a=[].slice.call(arguments),c=a.shift();this[c]&&this[c].apply&&this[c].apply(this,a);var d=[this.hooks,this.conf.hooks];for(var e=0;e<d.length;e++)if(d[e]&&d[e][c]){var f=d[e][c];if(b.isFunction(f))return f.apply(this,a);for(var g=0;g<f.length;g++)f[g].apply(this,a)}},a.plugin=function(a,b,c){var e=this.hooks;if(typeof this.conf!="undefined")throw"plugin can only be called on object prototype";d(e,a,b,c)},a.listen=function(a,b,c){var e=this.isReady,f=this.conf.hooks;if(typeof this.conf=="undefined")throw"listen can only be called on real instance";if(e!==null&&a=="init")return b.call(this);if(e===!0&&a=="ready")return b.call(this);d(f,a,b,c)},a.plugin("config",function(){this.isReady=null,this.defered={},this.conf.hooks||(this.conf.hooks={})}),a.plugin("init",function(){this.isReady=null}),a.plugin("ready",function(){this.isReady=!0,this.trigger("start")},9999),a.defer=function(){var a=this,b=[].slice.call(arguments),c=b[0],d=0;isNaN(b[0])||(d=b.shift(),c=b[0]);if(this.defered[c])return;var e=function(){a.defered[c]=!1,a.trigger.apply(a,b)};this.defered[c]=window.setTimeout(e,d)},a.undefer=function(a){window.clearTimeout(this.defered[a]),this.defered[a]=!1}}(RTP.Slider.prototype,jQuery),function(a,b){a.setSlideDim=function(a,c){var d=this.pd[0],e=this.ps[0],f=this.pl[0],g=this.pb[0],h=this.pm[0],i=this.pp[0];a=this.slide2slide(a);var j=this.slidepanels[a],k=j.length;while(k--){var l=j[k],m=this.panels[l],n=h[l][2]+g[l][2]+i[l][2];c<n&&(c=n),this.pd[0][l]=c,this.ps[0][l]=c-n;var o=this.ps[0][l];this.conf.vertical?b(m).height(o):b(m).width(o),this.pd[1][l]=this.getPanelSize(l,1)}},a.getPanelsBySlide=function(a){a=parseInt(a,10),a=this.slide2slide(a);var c=this.slidepanels[a].slice(),d=c.length;while(d--)c[d]=this.panels[c[d]];return b(c)}}(RTP.Slider.prototype,jQuery),function(a,b){function c(a){var b=this.conf.offsetReverse;return this.conf.vertical^a?b?["Bottom","Top"]:["Top","Bottom"]:b?["Right","Left"]:["Left","Right"]}function d(a,b,d,e){var f=c.call(this,e),g=parseFloat(a.css(b+f[0]+d),10),h=parseFloat(a.css(b+f[1]+d),10);return isNaN(g)&&(g=0),isNaN(h)&&(h=0),[g,h,g+h]}function e(a,b){return d.call(this,a,"margin","",b)}function f(a,b){return d.call(this,a,"border","Width",b)}function g(a,b){return d.call(this,a,"padding","",b)}function h(a){var b,c=this.pd[a],d=this.ps[a],e=this.pl[a],f=this.pb[a],g=this.pm[a],h=this.pp[a];d.length=c.length=0;var i=this.panels.length;while(i--)d[i]=b=this.getPanelSize(i,a),c[i]=b+h[i][2]+f[i][2]+g[i][2]}function i(a){this.pl[a]=[],this.pm[a]=[],this.pb[a]=[],this.pp[a]=[];var b=this.panels.length;while(b--){var c=this.panels.eq(this.panel2panel(b));this.pl[a][b]=c.css("box-sizing"),this.pm[a][b]=e.call(this,c,a),this.pb[a][b]=f.call(this,c,a),this.pp[a][b]=g.call(this,c,a)}}a.plugin("config",function(){this.ps=[[],[]],this.pm=[[],[]],this.pb=[[],[]],this.pp=[[],[]],this.pd=[[],[]],this.pl=[]}),a.getPanelSize=function(a,b){return a=this.panels.eq(this.panel2panel(a)),this.conf.vertical^b?a.height():a.width()},a.updatePanels=function(){this.slidepanels=[],this.slen=this.slides.length,this.smax=this.smin+this.slen-1;for(var a=0;a<this.panels.length;a++){var b=this.panel2slide(a);this.slidepanels[b]?this.slidepanels[b].push(a):this.slidepanels[b]=[a]}},a.checkPanelsStyle=function(a){i.call(this,0),i.call(this,1),h.call(this,0),h.call(this,1),this.updatePanelsOffset()},a.readPanelsDim=function(){h.call(this,0)},a.readPanelsOpp=function(){h.call(this,1)},a.updatePanelsOffset=function(){if(this.conf.carousel3d){var a=this.pd[0],b=0;this.offset=[0];for(var c=0;c<a.length;c++)this.offset.push(b+=a[c]);this.trigger("changedPanelsOffset")}else{this.trigger("changedPanelsOffset");var a=this.pd[0],b=0;this.offset=[];var b=this.panels.eq(0).offset(),d=this.conf.vertical?b.top:b.left;d-=this.pm[0][0][0];for(var c=0;c<a.length;c++)b=this.panels.eq(c).offset(),b=this.conf.vertical?b.top:b.left,b=parseFloat(b)-d-this.pm[0][c][0],this.offset.push(b);this.panels.length&&this.offset.push(parseFloat(b)+this.pd[0][c-1])}},a.plugin("ready",function(){this.updatePanels(),this.checkPanelsStyle()},-99)}(RTP.Slider.prototype,jQuery),function(a,b){function c(a,b){var c=this.conf,d=this.wrapper,e=this.viewport;c.vertical^b?(e.height(a),c.linkWrapperToViewportOpp&&d.height(e.outerHeight(!0))):(e.width(a),c.linkWrapperToViewportDim&&d.width(e.outerWidth(!0)))}function d(a){var b=this.viewport;return this.conf.vertical^a?b.height():b.width()}a.plugin("config",function(){this.conf=b.extend({linkWrapperToViewportDim:!0,linkWrapperToViewportOpp:!1},this.conf)}),a.getViewportOffset=function(){var a=this.viewport.offset();return this.conf.vertical?{x:a.top,y:a.left}:{x:a.left,y:a.top}},a.setViewportDim=function(a){c.call(this,a,0),this.vp_x=a,this.trigger("updatedViewportDim",a)},a.setViewportOpp=function(a){c.call(this,a,1),this.trigger("updatedViewportOpp",a)},a.getViewportDim=function(){return d.call(this,0)},a.getViewportOpp=function(){return d.call(this,1)},a.readviewportDim=function(){this.vp_x=d.call(this,0)},a.readviewportOpp=function(){this.vp_y=d.call(this,1)},a.checkViewportDim=function(){var a=d.call(this,0);if(this.vp_x!==a){var b=this.vp_x;this.vp_x=a,this.trigger("changedViewportDim",a,b)}},a.checkViewportOpp=function(){var a=d.call(this,1);if(this.vp_y!==a){var b=this.vp_y;this.vp_y=a,this.trigger("changedViewportOpp",a,b)}}}(RTP.Slider.prototype,jQuery),function(a,b){function c(a){return this.conf.vertical^a?"height":"width"}function d(a){var b=this.conf.offsetReverse;return this.conf.vertical^a?b?"marginBottom":"marginTop":b?"marginRight":"marginLeft"}a.getContainerOffset=function(a){return-(parseFloat(this.container.css(d.call(this,a)),10)||0)},a.setContainerOffset=function(a,b){var c=this.offset[this.smin],e=this.offset[this.smax+1],f=e-c;if(this.conf.carousel){while(a<c)a+=f;while(e<=a)a-=f}this.container.css(d.call(this,b),-a),this.ct_off=a},a.readContainerOffset=function(){this.ct_off=this.getContainerOffset(0)},a.checkContainerOffset=function(){var a=this.getContainerOffset(0);if(this.ct_off!==a){var b=this.ct_off;this.ct_off=a,this.trigger("changedContainerOffset",a,b)}},a.plugin("changedPanelsOffset",function(){if(this.conf.vertical)return;var a=0,b=this.panels.length;while(b--)a+=this.pd[0][b];this.container.css(c.call(this),a+"px")},-9999),a.plugin("ready",function(){this.checkContainerOffset()},-99)}(RTP.Slider.prototype,jQuery),function(a,b){a.updatePanelExposure=function(){var a=this.slide2panel(this.position),b=this.conf.panelsVisible||1,c=this.conf,d=c.alignPanel,e=c.alignViewport,f=c.panelsVisible;if(!c.carousel)if(c.fillViewport){var g=f*e-d,h=-1*g+f-1;a<this.smin+g&&(a=this.smin+g),a>this.smax-h&&(a=this.smax-h)}else c.shrinkViewport&&(a>this.smax+1-this.smin-f?f=this.smax+1-a:a<this.smin-1+f&&(f=this.smin+1+a));a+=d-e*f;var i=[],j=a,k=Math.floor(j),l=a+f,m=Math.ceil(l),n=this.slides.length;while(n--)i[n]=0;for(n=k;n<m;n++){var o=j-n,p=l-n,q=this.slide2slide(n);p<1?i[q]+=p:i[q]+=1,o>0&&(i[q]-=o)}var r=this.s_e;this.s_e=i,this.trigger("updatedSlideExposure",i,r)},a.checkSlideVisibility=function(){var a=this.ct_off,b,c=0,d=[],e=this.pd[0],f=this.slides.length,g=this.ct_off,h=g+this.vp_x;while(f--)d[f]=0;for(f=0;c<h;f++){var i=this.panel2slide(f),j=c+e[i];if(j<g||c>h)b=0;else if(c>=g&&j<=h)b=1;else if(c<g&&j>h)b=(h-g)/(j-c);else if(c<g)b=(j-g)/(j-c);else{if(!(j>h))throw"updateVisibility has invalid state";b=(h-c)/(j-c)}d[i]+=b,c=j}var k=this.s_v;this.s_v=d,this.trigger("changedSlideVisibility",d,k)},a.plugin("layout",a.updatePanelExposure,-99),a.plugin("layout",a.checkSlideVisibility,99)}(RTP.Slider.prototype,jQuery),function(a,b){a.setPosition=function(a){a=this.slide2slide(a);if(this.position==a)return;var b=this.position;this.position=a,this.trigger("layout",{})},a.setOffsetByPosition=function(a){this.position=this.slide2slide(a);var b=this.conf,c=b.alignPanel,d=b.alignViewport,e=b.panelsVisible;if(!b.carousel)if(b.fillViewport){var f=e*d-c,g=-1*f+e-1;a<this.smin+f&&(a=this.smin+f),a>this.smax-g&&(a=this.smax-g)}else b.shrinkViewport&&(a>this.smax+1-this.smin-e?e=this.smax+1-a:a<this.smin-1+e&&(e=this.smin+1+a));var h=this.getOffsetByPosition(a);h-=this.vp_x*d,this.setContainerOffset(h)},a.getOffsetByPosition=function(a){a+=this.smin+this.conf.alignPanel;if(this.conf.carousel){while(a>this.smax)a-=this.slides.length;while(a<this.smin)a+=this.slides.length}else{if(a<=this.smin+0)return this.offset[this.smin];if(a>=this.smax+1)return this.offset[this.smax+1]}var b=Math.floor(a),c=a-b,d=this.pd[0][b]*c;return d+=this.offset[b],d},a.getPositionByOffset=function(a){a=parseInt(a+.5,10);var b=this.offset[this.smin],c=this.offset[this.smax+1],d=this.conf.alignPanel+this.smin;if(this.conf.carousel){while(a<b)a+=c-b;while(c<=a)a-=c-b}else{if(a<=b)return this.smin;if(a>=c)return this.smax+1}var e=this.panels.length;while(e--){var f=this.offset[e+0],g=this.offset[e+1];if(f==a)return e-d;if(g>a&&a>f)return(a-f)/(g-f)+e-this.smin-d}throw"getPositionByOffset has invalid state"},a.plugin("layout",function(){this.position=this.slide2slide(this.position)},-999),a.plugin("layout",function(){this.setOffsetByPosition(this.position)})}(RTP.Slider.prototype,jQuery),function(a,b){function d(a){var b;return a.toString().match(/^([\+\-])/)?b=this.position+parseFloat(a):b=parseFloat(a),this.conf.carousel?b:this.panel2panel(b)}a.plugin("config",function(){this.animating=!1,this.queue=[],this.conf=b.extend({easeDuration:1200,easeFunction:"easeInOutExpo"},this.conf)}),a.lock=function(){var a=this;if(a.locked)return a.locked.prerequisite();if(a.swiping)return;var c=b.proxy(a.resume,a);return a.resume=!1,a.locked=new RTP.Multievent(function(){if(a.animating)return;a.locked=!1;if(!c)return;c.call(a),c=null}),a.locked.prerequisite()};var c=function(a,b,c,d,e){var f=this;f.queue.push({keep:e,action:a,easing:c||this.conf.easeFunction,duration:isNaN(b)?this.conf.easeDuration:b,step:function(){h.call(f,this)},complete:function(){d&&d.call(f,this),g.call(f,this)}})},e=function(a){this.animating=!0;var c=a.action,e=this.position,f={pos:e},g=d.call(this,c);if(g==e)return a.complete.call({pos:g});if(this.conf.carousel&&!a.keep){var h=Math.abs(e-g),i=g-this.slides.length,j=g+this.slides.length;h>Math.abs(i-e)&&(g=i),h>Math.abs(j-e)&&(g=j)}this.animating=b(f).animate({pos:g},a)};a.abortAnimation=function(){this.queue.length=0,this.animating&&this.animating!==!0&&this.animating.stop(!0,!1),this.animating=this.locked=!1};var f=function(){if(this.animating||this.locked)return;if(this.queue.length==0)return;var a=this.queue.shift();this.resume=function(){this.trigger("startAnimation"),e.call(this,a),this.resume=null};var b=d.call(this,a.action);b!=this.position&&this.trigger("preAnimation"),this.resume&&!this.locked&&this.resume.call(this)},g=function(a){this.animating=!1,this.setPosition(a.pos),this.resume=function(){this.trigger("stopAnimation"),f.call(this),this.resume=null},this.queue.length==0&&this.trigger("postAnimation"),this.resume&&!this.locked&&this.resume.call(this)},h=function(a){this.setPosition(a.pos)};a.animate=function(a,d,e,g,h){b.isFunction(a)&&(a=a.call(this)),this.trigger("interaction",a),c.apply(this,arguments),f.call(this)},a.goTo=function(a,d,e,g,h){b.isFunction(a)&&(a=a.call(this)),c.apply(this,arguments),f.call(this)},a.goNext=function(a,b){this.animate("+1",a,b)},a.goPrev=function(a,b){this.animate("-1",a,b)},a.goFirst=function(a,b){this.animate("0",a,b)},a.goLast=function(a,b){this.animate(this.slen-1,a,b)}}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("config",function(){this.conf=b.extend({sizer:!1},this.conf)}),a.preLayout=function(a){this.trigger("readviewportDim",a),this.trigger("readviewportOpp",a)},a.updateLayout=function(a){(this.vp_x_lck!==this.vp_x||this.vp_y_lck!==this.vp_y||a.force)&&this.trigger("changedViewportDim",a)},a.postLayout=function(a){if(this.vp_x_lck!==this.vp_x||this.vp_y_lck!==this.vp_y||a.force)this.vp_x_lck=this.vp_x,this.vp_y_lck=this.vp_y,this.trigger("layout",a)},a.plugin("ready",function(){OCBNET.Layout.add(this),OCBNET.Layout()},999),a.plugin("layout",function(a){(this.vp_x_lck!==this.vp_x||this.vp_y_lck!==this.vp_y||a.force)&&OCBNET.Layout()},-99999)}(RTP.Slider.prototype,jQuery),function(a,b){function c(a){var c=this.panels.length,d=c;while(d--){var e=(a-this.pd[1][d])/2;b(this.panels[d]).css("top",e+"px")}}a.plugin("changedViewportOpp",c,999),a.plugin("updatedViewportOpp",c,999)}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("changedViewportDim",function(){!this.conf.vertical&&this.conf.sizer=="panelsByViewport"&&(this.setSlidesDimFromVp(),this.trigger("readPanelsOpp"),this.trigger("readPanelVisibility"))}),a.getSlideDimFromVp=function(a){return parseInt(this.vp_x/this.conf.panelsVisible+.5,10)},a.setSlidesDimFromVp=function(){var a=this.slides.length;while(a--)this.setSlideDim(a,this.getSlideDimFromVp(a));this.updatePanelsOffset()}}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("updatedSlideExposure",function(a){var b=0;if(this.conf.vertical||this.conf.sizer=="viewportByPanels"){for(var c=0;c<a.length;c++){if(a[c]==0)continue;b+=this.pd[0][c]*a[c]}this.setViewportDim(b)}})}(RTP.Slider.prototype,jQuery),function(a,b){function c(){var a=this.s_e;if(this.conf.vertical)return;if(!this.conf.autoVpOpp)return;var b=0,c=this.conf.autoVpOppDeadZone||1;for(var d=0;d<a.length;d++){if(a[d]==0)continue;a[d]>c?b=Math.max(b,this.pd[1][d]):b=Math.max(b,this.pd[1][d]*(a[d]/c))}this.setViewportOpp(b),this.vp_y=b}a.plugin("config",function(){this.conf=b.extend({autoVpOpp:!0,autoVpOppDeadZone:.5},this.conf)}),a.plugin("layout",c),a.plugin("layout",function(){this.conf.vertical&&(this.readPanelsDim(),this.updatePanelsOffset(),this.setOffsetByPosition(this.position))},-99999)}(RTP.Slider.prototype,jQuery),function(a,b){function e(a){return a+1+"/"+this.slides.length}function f(a,c){var d=this.klass.panelHidden,e=this.klass.panelPartial,f=this.klass.panelVisible;c>=1?this.navDot.eq(a).addClass(f).removeClass(d).removeClass(e):c<=0?this.navDot.eq(a).addClass(d).removeClass(e).removeClass(f):this.navDot.eq(a).addClass(e).removeClass(d).removeClass(f);var g=this.conf.navDotStepFunction;b.isFunction(g)&&g.call(this,a,c)}function g(a){if(this.conf.navDots)for(var b=0;b<a.length;b++)f.call(this,b,a[b])}var c=b.isFunction,d="rtp-nav-dot";a.plugin("config",function(){this.conf=b.extend({navDots:!1,navDotAltFormat:e,navDotTitleFormat:e,navDotStepFunction:function(a,b){this.navDotImg.eq(a).css("opacity",b)}},this.conf),this.klass=b.extend({navDot:d,panelHidden:d+"-hidden",panelPartial:d+"-partial",panelVisible:d+"-visible"},this.klass),this.tmpl=b.extend({navDotWrapper:['<span><a href="javascript:void(0);">',"</a></span>"],navDotElement:'<img src="img/rtp-nav-dot-clear.gif" width="12" height="12" alt=""/>'},this.tmpl,this.conf.tmpl)}),a.plugin("init",function(){var a=this;a.conf.navDots&&a.slides.length>1&&(a.navDot=b(),a.navDotImg=b(),a.navDotWrapper=b('<div class="'+d+'s">'),a.slides.each(function(d){var e=b(a.tmpl.navDotWrapper[0]+a.tmpl.navDotElement+a.tmpl.navDotWrapper[1]).addClass(a.klass.navDot).addClass([a.klass.navDot,d].join("-")).click(function(){a.animate(d)}).appendTo(a.navDotWrapper),g=b("IMG",e);c(a.conf.navDotAltFormat)&&g.attr("alt",a.conf.navDotAltFormat.call(a,d)),c(a.conf.navDotTitleFormat)&&g.attr("title",a.conf.navDotTitleFormat.call(a,d)),a.navDot.push(e.get(0)),a.navDotImg.push(g.get(0)),f.call(a,d,0)}),a.navDotWrapper.appendTo(a.wrapper))}),a.plugin("changedSlideVisibility",g)}(RTP.Slider.prototype,jQuery),function(a,b){var c=function(a){var b=this.arrows.prev,c=this.arrows.next;this.conf.carousel?(b.is(":visible")||b.stop(!0,!0).show(),c.is(":visible")||c.stop(!0,!0).show()):(isNaN(a)&&(a=this.conf.slideEaseDuration),this.position<this.smin+1?b.is(":visible")&&b.stop(!0,!0).fadeOut(a):b.is(":visible")||b.stop(!0,!0).fadeIn(a),this.position>this.smax-1?c.is(":visible")&&c.stop(!0,!0).fadeOut(a):c.is(":visible")||c.stop(!0,!0).fadeIn(a))};a.plugin("layout",c),a.plugin("init",function(){this.conf=b.extend({navArrows:!1,navArrowAttach:"wrapper",navArrowPosition:"default",navArrowPrevText:"&#171; left",navArrowNextText:"right &#187;"},this.conf),this.tmpl=b.extend({"arrow-prev":['<div class="rtp-nav-prev"><a href="javascript:void(0)">',"</a></div>"],"arrow-next":['<div class="rtp-nav-next"><a href="javascript:void(0)">',"</a></div>"]},this.tmpl,this.conf.tmpl),this.selector=b.extend({"nav-prev":".rtp-nav-prev A","nav-next":".rtp-nav-next A"},this.selector,this.conf.selector),this.arrows={prev:b(),next:b()};if(this.conf.navArrows){var a=this.viewport.append,d=this.viewport.prepend;switch(this.conf.navArrowPosition.substr(0,1)){case"r":d=this.viewport.append,a=this.viewport.prepend;break;case"p":a=this.viewport.prepend;break;case"a":d=this.viewport.append}var e=this.conf.navArrowAttach.substring(0,1)=="p"?this.panels:this.wrapper,f=this.conf.navArrowPrevText,g=this.conf.navArrowNextText;f&&d.call(e,this.tmpl["arrow-prev"][0]+f+this.tmpl["arrow-prev"][1]),g&&a.call(e,this.tmpl["arrow-next"][0]+g+this.tmpl["arrow-next"][1]),this.arrows.prev=this.wrapper.find(this.selector["nav-prev"]),this.arrows.next=this.wrapper.find(this.selector["nav-next"]),this.arrows.prev&&this.arrows.prev.click(b.proxy(function(){return this.goPrev(),!1},this)),this.arrows.next&&this.arrows.next.click(b.proxy(function(){return this.goNext(),!1},this)),c.call(this,0)}})}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("init",function(){this.conf=b.extend({navKeyboard:!1,navKeyboardPrev:this.conf.vertical?38:37,navKeyboardNext:this.conf.vertical?40:39},this.conf)}),a.plugin("ready",function(){this.conf.navKeyboard&&b(document).keydown(b.proxy(function(a){if(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return!0;switch(a.which){case this.conf.navKeyboardPrev:this.goPrev();break;case this.conf.navKeyboardNext:this.goNext()}},this))})}(RTP.Slider.prototype,jQuery),function(a,b){function c(){if(!this.conf.curClass)return;var a=this.conf,c=this.position,d=a.curClass,e=a.curClassDeadZone,f=parseInt(this.position+.5,10);f=this.panel2panel(f),this.panels.removeClass(d);if(Math.abs(f-c)<e){if(this.navDot){var g=this.slidepanels[f];b(this.navDot).removeClass(d);var h=g.length;while(h--)b(this.navDot[g[h]]).addClass(d)}this.getPanelsBySlide(f).addClass(d)}}a.plugin("config",function(){this.conf=b.extend({curClass:"current",curClassDeadZone:.25},this.conf)}),a.plugin("layout",c)}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("config",function(){this.autosliding=null,this.conf=b.extend({autoslide:!1,autoslideAction:"+1",autoslideDelay:3500,autoslideFirstDelay:1e3,autoslideResumeDelay:!1,autoslideStopOnHover:!1,autoslidePauseOnHover:!0,autoslideStopOnAction:!1},this.conf)}),a.plugin("interaction",function(){this.conf.autoslideStopOnAction&&this.stopAutoSlide(!1)}),a.plugin("stopAnimation",function(){if(!this.autosliding)return;if(this.queue.length>0)return;this.startAutoSlide(this.conf.autoslideDelay)}),a.startAutoSlide=function(a,c){isNaN(c)&&(c="+1");if(this.autosliding&&this.autosliding!==!0)return;this.autosliding=!0,this.trigger("autoslideStart");if(this.queue.length>0||this.animating||this.locked)return;this.autosliding=window.setTimeout(b.proxy(function(){if(this.queue.length>0||this.animating||this.locked)return;b.isFunction(c)&&(c=c.call(this)),isNaN(c)&&(c=this.conf.autoslideAction),this.goTo(c),this.autosliding=!0},this),isNaN(a)?0:a)},a.stopAutoSlide=function(a){this.autosliding!==!0&&window.clearTimeout(this.autosliding),this.autosliding=a?!1:null,a?this.trigger("autoslidePause"):this.trigger("autoslideStop")},a.plugin("start",function(){if(!this.conf.autoslide)return;var a=isNaN(this.conf.autoslideFirstDelay)?this.conf.autoslideDelay:this.conf.autoslideFirstDelay;this.startAutoSlide(a)}),a.plugin("ready",function(){this.wrapper.hover(b.proxy(function(){if(this.autosliding===null)return;this.conf.autoslideStopOnHover?this.stopAutoSlide(!1):this.conf.autoslidePauseOnHover&&this.stopAutoSlide(!0)},this),b.proxy(function(){if(this.autosliding!==!1)return;var a=this.conf.autoslideResumeDelay!=0?this.conf.autoslideResumeDelay:this.conf.autoslideDelay;this.conf.autoslidePauseOnHover&&this.startAutoSlide(a)},this))}),a.plugin("swipeStart",function(){this.backup=this.autosliding,this.autosliding&&this.stopAutoSlide(!0)}),a.plugin("swipeStop",function(){this.backup&&this.startAutoSlide()})}(RTP.Slider.prototype,jQuery),function(a,b){function c(a,c){var d=this,e=d.getPanelsBySlide(d.position);b("DIV.info",e).each(function(){var e=b(this);e.css("opacity")!=a&&e.animate({opacity:a},{duration:c,complete:d.lock()})})}a.plugin("swipeMove",function(a,b,d){if(d.swipeMoves.length!=1)return;c.call(this,0,300)}),a.plugin("abortAnimation",function(){b("DIV.info",this.panels).stop(!0,!0)}),a.plugin("postAnimation",function(){c.call(this,1,700)}),a.plugin("preAnimation",function(){c.call(this,0,700)}),a.plugin("ready",function(){b("DIV.info",this.panels).css({opacity:0});var a=this.getPanelsBySlide(this.position);b("DIV.info",a).css({opacity:1})},-9)}(RTP.Slider.prototype,jQuery),function(a,b){var c=function(a){if(a.length<2)return[0,0];var b=a[0][2],c=0,d=0,e=0,f=0;for(var g=0,h=a.length;g<h;g++){var i=a[g][0],j=a[g][2]-b;c+=j,f+=j*j,d+=i,e+=j*i}var k=(h*e-c*d)/(h*f-c*c),l=(d*f-c*e)/(h*f-c*c);return isNaN(k)&&console.log(c,f,d,e,a),[k,l]};a.plugin("config",function(){this.swipe=!1,this.conf=b.extend({swipeFps:25,swipeVsync:!1,swipeThreshold:5},this.conf)}),a.plugin("swipeStart",function(a,b,c){this.autoSlidePause&&this.autoSlidePause(),this.animation=!0,c.swipeMoves=[],c.swipeDrag=c.swipeScroll=!1,c.swipeStartDrag=c.swipeX=a,c.swipeStartScroll=c.swipeY=b;var d=this.getViewportOffset(),e=this.ct_off+a-d.x;c.vp_off=d.x,c.swipeStartDragPos=this.getPositionByOffset(e),c.swipeStartPositionOff=this.getOffsetByPosition(this.position)-e,this.locked=!0,this.trigger("abortAnimation")}),a.plugin("swipeDraw",function(a){var b=a.swipeX,c=a.swipeY,d=a.swipeStartDrag-b;return a.swipeStartDrag=b,this.setPosition(this.getPositionByOffset(this.getOffsetByPosition(this.position)+d))}),a.plugin("swipeMove",function(a,b,c){this.swiping=!0;var d=c.swipeMoves;c.swipeX=a,c.swipeY=b;if(c.swipeDrag==0&&c.swipeScroll==0){var e=this.conf.swipeThreshold;Math.abs(c.swipeStartDrag-a)>e?c.swipeDrag=!0:Math.abs(c.swipeStartScroll-b)>e&&(c.swipeScroll=!0)}var f=d.length;f>2&&(d[f-2][0]<d[f-1][0]&&d[f-1][0]>a?d.length=0:d[f-2][0]>d[f-1][0]&&d[f-1][0]<a&&(d.length=0)),d.length>50&&d.shift(),d.push([a,b,(new Date).getTime()]);if(c.swipeDrag==0&&c.swipeScroll==0){var e=this.conf.swipeThreshold;Math.abs(c.swipeStartDrag-a)>e?c.swipeDrag=!0:Math.abs(c.swipeStartScroll-b)>e&&(c.swipeScroll=!0)}return c.swipeDrag?(this.conf.vsync?this.trigger("swipeDraw",c):this.defer(1e3/this.conf.fps,"swipeDraw",c),!c.swipeDrag):!0}),a.plugin("swipeStop",function(a,b,d){this.trigger("abortAnimation");var e=d.swipeMoves;this.trigger("swipeMove",a,b,d),this.undefer("swipeDraw");var f=(new Date).getTime(),g=f-500;while(e.length&&e[0][2]<g)e.shift();var h=c(e),i=h[0],j=h[1],k=parseInt(this.position+.5+i*-0.4),l=Math.abs(i);this.locked=!1,this.trigger("abortAnimation"),this.trigger("swipeFinish",a,b,d);var m=0,n="linear",o=Math.abs(k-this.position);o>.5?(n=l<.375?"easeOutBounce":"easeOutExpo",m=Math.max(Math.min(100/Math.pow(1/l,1.5),9e3),1200)):o>0&&(n=l<.375?"easeOutBounce":"easeOutExpo",m=Math.max(Math.min(100/Math.pow(1/l,1.5),2e3),600));var p=d.swipeDrag;return delete d.swipeDrag,delete d.swipeScroll,d.swipeMoves=[],this.animate(k,m,n,function(){this.foobar=!1,this.swiping=!1},!0),!p})}(RTP.Slider.prototype,jQuery),function(a,b){a.plugin("config",function(){this.conf=b.extend({mouseSwipe:!1},this.conf)});var c="mouseup",d="mousemove",e="mousedown",f=function(a,e){if(!this.conf.mouseSwipe)return!0;if(e.which!==1)return!0;var f=this.conf.vertical,i=f?e.pageY:e.pageX,j=f?e.pageX:e.pageY;return this.trigger("swipeStart",i,j,a),a.end=b.proxy(h,this,a),a.move=b.proxy(g,this,a),b(document).bind(c,a.end),b(document).bind(d,a.move),!1},g=function(a,b){var c=this.conf.vertical,d=c?b.pageY:b.pageX,e=c?b.pageX:b.pageY;return this.trigger("swipeMove",d,e,a),!a.dragSwipe},h=function(a,e){b(document).unbind(d,a.move),b(document).unbind(c,a.end),a.end=a.move=a.start=null;var f=this.conf.vertical,g=f?e.pageY:e.pageX,h=f?e.pageX:e.pageY;return this.trigger("swipeStop",g,h,a),!a.dragSwipe};a.plugin("ready",function(){var a={};this.viewport.bind(e,b.proxy(f,this,a))})}(RTP.Slider.prototype,jQuery),function(a,b){function g(a,c){if(!this.conf.touchSwipe)return!0;var d=c.originalEvent,f=d.touches||[],g=d.changedTouches||[],i=this.conf.vertical,j=g[0]||f[0],k=i?j.clientY:j.clientX,l=i?j.clientX:j.clientY;if(f.length==1){if(a.toucher)return!1;a.move&&b(document).unbind(e,a.move);for(var m in a)a.hasOwnProperty(m)&&delete a[m];return a.toucher=f[0],k=i?a.toucher.clientY:a.toucher.clientX,l=i?a.toucher.clientX:a.toucher.clientY,a.move=b.proxy(h,this,a),this.trigger("swipeStart",k,l,a),a.move&&b(document).bind(e,a.move),!1}a.move&&b(document).unbind(e,a.move),f.length>1?a.swipeMoves=[]:this.trigger("swipeStop",k,l,a);for(var m in a)a.hasOwnProperty(m)&&delete a[m];return!0}function h(a,b){if(!this.conf.touchSwipe)return!0;var c=b.originalEvent,d=c.touches,e=c.changedTouches,f=a.toucher,g=this.conf.vertical,h=g?f.clientY:f.clientX,i=g?f.clientX:f.clientY;return this.trigger("swipeMove",h,i,a,b),!a.swipeDrag}a.plugin("config",function(){this.conf=b.extend({touchSwipe:!1},this.conf)});var c=function(a,b){return!1},d="touchend",e="touchmove",f="touchstart";a.plugin("ready",function(){var a={};this.viewport.bind(d,b.proxy(g,this,a)),this.viewport.bind(f,b.proxy(g,this,a))})}(RTP.Slider.prototype,jQuery),function(a,b){function e(){var a=0,b=this.buttons["toggle-"+d[a]];b=b?b.find("IMG"):[];var c=b.length;while(c--)this.autosliding!==null?b[c].src=b[c].src.replace("play",d[a]):b[c].src=b[c].src.replace(d[a],"play");a=1;var b=this.buttons["toggle-"+d[a]];b=b?b.find("IMG"):[];var c=b.length;while(c--)this.autosliding?b[c].src=b[c].src.replace("play",d[a]):b[c].src=b[c].src.replace(d[a],"play")}var c="rtp-toolbar";a.plugin("config",function(){this.conf=b.extend({navToolbar:!1,navToolbarButtons:this.conf.carousel?"rewind, toggle-stop, toggle-pause, forward":"first, rewind, toggle-stop, toggle-pause, forward, last"
},this.conf),this.klass=b.extend({},this.klass),this.tmpl=b.extend({navButtonWrapper:['<a href="javascript:void(0);">',"</a>"],navButton:'<img src="img/rtp-toolbar-{type}.gif" width="12" height="12" alt="{title}"/>'},this.tmpl)}),a.plugin("init",function(){function d(a){switch(a){case"first":this.goFirst();break;case"rewind":this.goPrev();break;case"play":this.startAutoSlide();break;case"pause":this.stopAutoSlide(!0);break;case"stop":this.stopAutoSlide(!1);break;case"toggle-pause":this.autosliding?this.stopAutoSlide(!0):this.startAutoSlide();break;case"toggle-stop":this.autosliding!==null?this.stopAutoSlide(!1):this.startAutoSlide();break;case"forward":this.goNext();break;case"last":this.goLast()}}var a=this;a.buttons={};if(a.conf.navToolbar){var e=a.conf.navToolbarButtons.split(/\s*,\s*/),f=[],g=b('<div class="'+c+'">');for(var h=0,i=e.length;h<i;h++){var j=b('<span class="rtp-toolbar-'+e[h]+'">'+a.tmpl.navButtonWrapper[0]+a.tmpl.navButton.replace(/{type}/g,e[h].replace("toggle-","")).replace(/{title}/g,e[h])+a.tmpl.navButtonWrapper[1]+"</span>").click(b.proxy(d,a,e[h]));g.append(a.buttons[e[h]]=j)}a.toolbarWrapper=g,a.toolbarWrapper.appendTo(a.wrapper)}});var d=["stop","pause"];a.plugin("ready",e),a.plugin("autoslideStop",e),a.plugin("autoslideStart",e),a.plugin("autoslidePause",e)}(RTP.Slider.prototype,jQuery),function(a){function c(b){var c,d,e=b.charAt(0).toUpperCase()+b.slice(1),f=["Moz","Webkit","O","ms"],g=document.createElement("div");if(b in g.style)d=b;else for(var h=0;h<f.length;h++){c=f[h]+e;if(c in g.style){d=c;break}}return g=null,a.support[b]=d,d}if(!a.cssHooks)throw"jQuery 1.4.3+ is needed for this plugin to work";var b=["boxSizing","transform","perspective","transformStyle","backfaceVisibility"],d=b.length;while(d--)(function(){var e=b[d],f=c(e);f&&f!==e&&(a.cssHooks[e]={get:function(b,c,d){return a.css(b,f)},set:function(a,b){a.style[f]=b}})})()}(jQuery),function(a,b){a.plugin("config",function(){this.conf=b.extend({carousel3d:!1},this.conf)}),a.plugin("init",function(){function f(a){if(!this.conf.carousel3d)return oldSetOffsetByPosition.apply(this,arguments);var b=360/this.slides.length*a,c=this.conf.vertical?"X":"Y";this.container.css({transform:"translateZ(-"+e+"px) rotate"+c+"(-"+b+"deg)"})}function g(){if(!this.conf.carousel3d)return;var a=this.conf,c=a.alignPanel,d=a.alignViewport,f=a.panelsVisible,g=Math.PI/this.slides.length,h=Math.max.apply(Math,this.pd[0])/2;e=parseInt(h/Math.tan(g),10);var i=f*(d-.5)-c+.5;this.panels.css({position:"absolute",left:"0px",right:"0px",outline:"1px solid transparent"}),this.cloned.hide();var j=this.conf.vertical?"X":"Y",k=this.slides.length,l=k;while(l--){var m=360/k*l+i;b(this.slides[l]).css({transform:"rotate"+j+"("+m+"deg) translateZ( "+e+"px )"})}this.viewport.css({perspective:e*f/2}),this.container.css({width:"100%",overflow:"visible","transform-style":"preserve-3d"})}var c,d,e;oldSetOffsetByPosition=this.setOffsetByPosition,this.setOffsetByPosition=f,a.plugin("layout",g,-9)})}(RTP.Slider.prototype,jQuery);